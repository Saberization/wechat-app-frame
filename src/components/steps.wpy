<style lang="scss">
.esp-steps-steps.esp-steps-5 .esp-steps-step {
  width: 25%;
}

.esp-steps-steps.esp-steps-4 .esp-steps-step {
  width: 33%;
}

.esp-steps-steps.esp-steps-3 .esp-steps-step {
  width: 50%;
}

.esp-steps-steps .esp-steps-step {
  position: relative;
  float: left;
  padding-bottom: 25px;
  color: #b1b1b1;
}

.esp-steps-steps .esp-steps-title {
  transform: translateX(-50%);
  font-size: 10px;
  text-align: center;
}

.esp-steps-steps .esp-steps-icons {
  position: absolute;
  top: 30px;
  left: -10px;
  padding: 0 8px;
  background-color: #fff;
  z-index: 10;
}

.esp-steps-steps .esp-steps-circle {
  display: block;
  position: relative;
  width: 5px;
  height: 5px;
  background-color: #e5e5e5;
  border-radius: 50%;
}

.esp-steps-steps .esp-steps-line {
  position: absolute;
  left: 0px;
  top: 32px;
  width: 100%;
  height: 1px;
  background-color: #e5e5e5;
}

/* 已完成的steps */
.esp-steps-steps .esp-steps-step-done {
  color: #333;
}

.esp-steps-steps .esp-steps-step-done .esp-steps-line {
  background-color: #06bf04;
}

.esp-steps-steps .esp-steps-step-done .esp-steps-circle {
  width: 5px;
  height: 5px;
  background-color: #09bb07;
}

/* 正在进行中的steps */
.esp-steps-steps .esp-steps-step-cur .esp-steps-icons {
  top: 25px;
  left: -14px;
}

.esp-steps-steps .esp-steps-step-cur .esp-steps-circle {
  width: 13px;
  height: 13px;
  background-image: url('https://b.yzcdn.cn/v2/image/wap/success_small@2x.png');
  background-size: 13px 13px;
}

.esp-steps-steps .esp-steps-step-cur .esp-steps-line {
  background-color: #e5e5e5;
}

/* 各种不同位置的 */
.esp-steps-steps .esp-steps-step-first-child .esp-steps-title {
  margin-left: 0;
  transform: none;
  text-align: left;
}

.esp-steps-steps .esp-steps-step-first-child .esp-steps-icons {
  left: -7px;
}

.esp-steps-steps .esp-steps-step-last-child {
  position: absolute;
  right: 0;
  top: 0;
  text-align: right;
}

.esp-steps-steps .esp-steps-step-last-child .esp-steps-title {
  transform: none;
  text-align: right;
}

.esp-steps-steps .esp-steps-step-last-child .esp-steps-icons {
  left: auto;
  right: -6px;
}

.esp-steps-steps .esp-steps-step-last-child .esp-steps-line {
  display: none;
}

/* 有描述的step */
.esp-steps-steps .esp-steps-step-db-title {
  min-height: 29px;
}

.esp-steps-steps .esp-steps-step-db-title .esp-steps-line {
  top: 45px;
}

.esp-steps-steps .esp-steps-step-db-title .esp-steps-icons {
  top: 43px;
}

.esp-steps-steps .esp-steps-step-db-title.esp-steps-step-cur .esp-steps-icons {
  top: 39px;
}

.esp-steps-vsteps {
  color: #999;
  font-size: 14px;
}

.esp-steps-vsteps .esp-steps-step {
  position: relative;
  padding: 15px 0;
}

.esp-steps-vsteps .esp-steps-step-done {
  color: #44bb00;
}

.esp-steps-vsteps .esp-steps-line {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 7px;
  width: 1px;
  background-color: #e5e5e5;
}

.esp-steps-vsteps .esp-steps-title {
  display: inline-block;
  line-height: 20px;
  padding-left: 27px;
}

.esp-steps-vsteps .esp-steps-title-desc {
  padding-left: 3px;
}

.esp-steps-vsteps .esp-steps-icons {
  position: absolute;
  left: 7px;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 2;
  padding: 3px 0;
  background-color: #fff;
}

.esp-steps-vsteps .esp-steps-circle {
  width: 5px;
  height: 5px;
  background-color: #cacaca;
  border-radius: 10px;
}

.esp-steps-vsteps .esp-steps-step-done .esp-steps-circle {
  width: 5px;
  height: 5px;
  background-color: #09bb07;
}

.esp-steps-vsteps .esp-steps-step-cur .esp-steps-circle {
  width: 13px;
  height: 13px;
  background: transparent url('https://b.yzcdn.cn/v2/image/wap/success_small@2x.png');
  background-size: 13px 13px;
  border-radius: 0;
}

.esp-steps-vsteps .esp-steps-icon-active {
  width: 13px;
  height: 13px;
}

.esp-steps-vsteps .esp-steps-step-first-child .esp-steps-title::before {
  content: '';
  position: absolute;
  top: 0;
  bottom: 50%;
  left: 7px;
  width: 1px;
  background-color: #fff;
  z-index: 1;
}

.esp-steps-vsteps .esp-steps-step-last-child .esp-steps-title::after {
  content: '';
  position: absolute;
  top: 50%;
  bottom: 0%;
  left: 7px;
  width: 1px;
  background-color: #fff;
  z-index: 1;
}

.esp-steps {
  position: relative;
}
</style>
<template>
  <view class="esp-steps esp-steps-{{ type == 'vertical' ? 'vsteps' : 'steps' }} esp-steps-{{ steps.length }} {{ className }}">
    <view
      wx:for="{{ steps }}" wx:for-item="step" wx:key="unique" wx:for-index="index"
      class="esp-steps-step {{ hasDesc ? 'esp-steps-step-db-title' : '' }} {{ index == 0 ? 'esp-steps-step-first-child' : '' }} {{ index == steps.length - 1 ? 'esp-steps-step-last-child' : '' }} {{ step.done ? 'esp-steps-step-done' : '' }} {{ step.current ? 'esp-steps-step-cur' : '' }}"
    >
      <view class="esp-steps-title">{{ step.text }}</view>
      <view wx:if="{{ hasDesc && step.desc }}" class="esp-steps-title esp-steps-title-desc">{{ step.desc }}</view>
      <view class="esp-steps-icons">
        <view class="esp-steps-circle"></view>
      </view>
      <view class="esp-steps-line"></view>
    </view>
  </view>
</template>
<script>
import wepy from 'wepy'

export default class Steps extends wepy.component {
  props = {
    steps: Object,
    type: String,
    hasDesc: {
      type: Boolean,
      default: false
    },
    className: {
      type: String,
      default: ''
    }
  }
  data = {}
  methods = {}
}
</script>
